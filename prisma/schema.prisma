// prisma/schema.prisma

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

// -- NOSSAS TABELAS DO RPG --

model Missao {
    id        String   @id @default(cuid())
    titulo    String
    descricao String?  @db.Text // @db.Text permite textos longos (Lore)
    ativa     Boolean  @default(true)
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    // Relacionamento: Uma missão tem várias pistas
    pistas    Pista[]
}

model Pista {
    id        String   @id @default(cuid())
    titulo    String
    descricao String?  @db.Text
    imagemUrl String   @db.Text // URLs podem ser grandes
    revelada  Boolean  @default(false) // Começa escondida
    createdAt DateTime @default(now())

    // Conexão com a Missão
    missaoId  String
    missao    Missao   @relation(fields: [missaoId], references: [id], onDelete: Cascade)
    
    // Index para deixar as buscas rápidas
    @@index([missaoId])
}